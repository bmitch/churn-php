#!/usr/bin/env php
<?php

require_once __DIR__ . '/bootstrap.php';

use Churn\Command\AssessComplexityCommand;
use Churn\Command\RunCommand;
use Composer\InstalledVersions;
use Symfony\Component\Console\Application;

$version = InstalledVersions::getPrettyVersion('bmitch/churn-php');
if (\substr($version, 0, 4) === 'dev-') {
    $version .= '@' . \substr(InstalledVersions::getReference('bmitch/churn-php'), 0, 7);
}

$application = new Application('churn-php', $version);
$application->add(new AssessComplexityCommand());
$application->add($run = RunCommand::newInstance());
$application->setDefaultCommand($run->getName());
$application->run();
